javascript:(async%20function()%20%7B%20const%20statusDiv%20%3D%20document.createElement('div')%3B%20statusDiv.id%20%3D%20'x-extractor-status'%3B%20statusDiv.style.cssText%20%3D%20'position%3Afixed%3Btop%3A20px%3Bright%3A20px%3Bbackground%3A%231d9bf0%3Bcolor%3Awhite%3Bpadding%3A15px%2020px%3Bborder-radius%3A8px%3Bz-index%3A999999%3Bfont-family%3Asystem-ui%3Bfont-size%3A14px%3Bbox-shadow%3A0%204px%2012px%20rgba(0%2C0%2C0%2C0.3)%3B'%3B%20statusDiv.textContent%20%3D%20'Extraction%20en%20cours...'%3B%20document.body.appendChild(statusDiv)%3B%20const%20updateStatus%20%3D%20(msg)%20%3D%3E%20%7B%20statusDiv.textContent%20%3D%20msg%3B%20%7D%3B%20const%20sleep%20%3D%20(ms)%20%3D%3E%20new%20Promise(r%20%3D%3E%20setTimeout(r%2C%20ms))%3B%20const%20READABILITY_URL%20%3D%20'__READABILITY_URL__'%3B%20function%20loadReadability()%20%7B%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%20if%20(typeof%20Readability%20!%3D%3D%20'undefined')%20%7B%20resolve()%3B%20return%3B%20%7D%20if%20(READABILITY_URL%20%3D%3D%3D%20'__READABILITY_'%20%2B%20'URL__')%20%7B%20reject(new%20Error('URL%20non%20configur%C3%A9e'))%3B%20return%3B%20%7D%20const%20s%20%3D%20document.createElement('script')%3B%20s.src%20%3D%20READABILITY_URL%3B%20s.onload%20%3D%20resolve%3B%20s.onerror%20%3D%20()%20%3D%3E%20reject(new%20Error('Impossible%20de%20charger%20Readability'))%3B%20document.head.appendChild(s)%3B%20%7D)%3B%20%7D%20function%20detectSource()%20%7B%20const%20host%20%3D%20window.location.hostname.toLowerCase()%3B%20if%20(host%20%3D%3D%3D%20'x.com'%20%7C%7C%20host%20%3D%3D%3D%20'twitter.com'%20%7C%7C%20host.endsWith('.x.com')%20%7C%7C%20host.endsWith('.twitter.com'))%20return%20'x'%3B%20if%20(host%20%3D%3D%3D%20'medium.com'%20%7C%7C%20host.endsWith('.medium.com'))%20return%20'medium'%3B%20const%20gen%20%3D%20document.querySelector('meta%5Bname%3D%22generator%22%5D')%3B%20if%20(gen%20%26%26%20gen.content%20%26%26%20gen.content.toLowerCase().includes('medium'))%20return%20'medium'%3B%20const%20mp%20%3D%20document.querySelector('meta%5Bproperty%3D%22al%3Aandroid%3Apackage%22%5D%5Bcontent%3D%22com.medium.reader%22%5D')%3B%20if%20(mp)%20return%20'medium'%3B%20return%20'generic'%3B%20%7D%20function%20extractX()%20%7B%20const%20article%20%3D%20document.querySelector('article')%3B%20if%20(!article)%20throw%20new%20Error('Article%20X%20non%20trouv%C3%A9')%3B%20const%20container%20%3D%20article.closest('%5Bdata-testid%3D%22tweet%22%5D')%20%7C%7C%20article%3B%20const%20clone%20%3D%20container.cloneNode(true)%3B%20%5B'%5Bdata-testid%3D%22reply%22%5D'%2C'%5Bdata-testid%3D%22retweet%22%5D'%2C'%5Bdata-testid%3D%22like%22%5D'%2C'%5Bdata-testid%3D%22bookmark%22%5D'%2C'%5Bdata-testid%3D%22share%22%5D'%2C'%5Brole%3D%22group%22%5D'%5D.forEach(sel%20%3D%3E%20%7B%20clone.querySelectorAll(sel).forEach(el%20%3D%3E%20el.remove())%3B%20%7D)%3B%20const%20styles%20%3D%20extractStyles()%3B%20const%20titleEl%20%3D%20document.querySelector('meta%5Bproperty%3D%22og%3Atitle%22%5D')%3B%20return%20%7B%20html%3A%20clone.outerHTML%2C%20styles%3A%20styles%2C%20title%3A%20titleEl%20%3F%20titleEl.content%20%3A%20document.title%2C%20siteName%3A%20'X'%2C%20extraCss%3A%20'%5Bstyle*%3D%22max-width%3A%20600px%22%5D%2C%5Bstyle*%3D%22max-width%3A600px%22%5D%2C%5Bstyle*%3D%22max-width%3A%20598px%22%5D%2C%5Bstyle*%3D%22max-width%3A598px%22%5D%7Bmax-width%3A100%25!important%7Darticle%2Carticle%3Ediv%7Bmax-width%3A100%25!important%3Bwidth%3A100%25!important%7D'%20%7D%3B%20%7D%20function%20extractMedium()%20%7B%20const%20selectors%20%3D%20%5B'article'%2C%20'%5Bdata-testid%3D%22storyContent%22%5D'%2C%20'.meteredContent'%2C%20'.postArticle-content'%5D%3B%20let%20articleEl%20%3D%20null%3B%20for%20(const%20sel%20of%20selectors)%20%7B%20articleEl%20%3D%20document.querySelector(sel)%3B%20if%20(articleEl)%20break%3B%20%7D%20if%20(!articleEl)%20throw%20new%20Error('Article%20Medium%20non%20trouv%C3%A9')%3B%20const%20clone%20%3D%20articleEl.cloneNode(true)%3B%20%5B'nav'%2C'%5Bdata-testid%3D%22headerSocialActions%22%5D'%2C'%5Bdata-testid%3D%22postSidebarActions%22%5D'%2C'%5Bdata-testid%3D%22post-end-cta%22%5D'%2C'%5Bdata-testid%3D%22belowPostTagsPrompt%22%5D'%2C'%5Bdata-testid%3D%22recommendedPosts%22%5D'%2C'%5Bdata-testid%3D%22responses%22%5D'%2C'%5Bdata-testid%3D%22metered-paywall%22%5D'%5D.forEach(sel%20%3D%3E%20%7B%20clone.querySelectorAll(sel).forEach(el%20%3D%3E%20el.remove())%3B%20%7D)%3B%20const%20titleEl%20%3D%20document.querySelector('meta%5Bproperty%3D%22og%3Atitle%22%5D')%3B%20return%20%7B%20html%3A%20clone.outerHTML%2C%20styles%3A%20''%2C%20title%3A%20titleEl%20%3F%20titleEl.content%20%3A%20document.title%2C%20siteName%3A%20'Medium'%2C%20extraCss%3A%20'figure%7Bmargin%3A2em%200%7Dfigure%20img%7Bdisplay%3Ablock%3Bmargin%3A0%20auto%7Dfigcaption%7Btext-align%3Acenter%3Bfont-size%3A0.875em%3Bopacity%3A0.7%3Bmargin-top%3A0.5em%7Dpre%7Bbackground%3Argba(128%2C128%2C128%2C0.1)%3Bpadding%3A1em%3Bborder-radius%3A4px%3Boverflow-x%3Aauto%7Dblockquote%7Bborder-left%3A3px%20solid%20currentColor%3Bmargin-left%3A0%3Bpadding-left%3A1.5em%3Bopacity%3A0.85%7D'%20%7D%3B%20%7D%20function%20extractGeneric()%20%7B%20const%20genericCss%20%3D%20'figure%7Bmargin%3A2em%200%7Dfigure%20img%7Bdisplay%3Ablock%3Bmargin%3A0%20auto%7Dfigcaption%7Btext-align%3Acenter%3Bfont-size%3A0.875em%3Bopacity%3A0.7%7Dpre%7Bbackground%3Argba(128%2C128%2C128%2C0.1)%3Bpadding%3A1em%3Bborder-radius%3A4px%3Boverflow-x%3Aauto%7Dblockquote%7Bborder-left%3A3px%20solid%20currentColor%3Bmargin-left%3A0%3Bpadding-left%3A1.5em%3Bopacity%3A0.85%7Da%7Bcolor%3A%231d9bf0%7D'%3B%20const%20titleEl%20%3D%20document.querySelector('meta%5Bproperty%3D%22og%3Atitle%22%5D')%3B%20const%20siteNameEl%20%3D%20document.querySelector('meta%5Bproperty%3D%22og%3Asite_name%22%5D')%3B%20const%20title%20%3D%20titleEl%20%3F%20titleEl.content%20%3A%20document.title%3B%20const%20siteName%20%3D%20siteNameEl%20%3F%20siteNameEl.content%20%3A%20window.location.hostname%3B%20if%20(typeof%20Readability%20!%3D%3D%20'undefined')%20%7B%20try%20%7B%20const%20docClone%20%3D%20document.cloneNode(true)%3B%20const%20reader%20%3D%20new%20Readability(docClone)%3B%20const%20article%20%3D%20reader.parse()%3B%20if%20(article%20%26%26%20article.content)%20%7B%20return%20%7B%20html%3A%20article.content%2C%20styles%3A%20''%2C%20title%3A%20article.title%20%7C%7C%20title%2C%20siteName%3A%20siteName%2C%20extraCss%3A%20genericCss%20%7D%3B%20%7D%20%7D%20catch%20(e)%20%7B%20console.warn('Readability%20a%20%C3%A9chou%C3%A9%2C%20fallback%20heuristique%3A'%2C%20e.message)%3B%20%7D%20%7D%20const%20candidates%20%3D%20%5B%20document.querySelector('article')%2C%20document.querySelector('%5Brole%3D%22article%22%5D')%2C%20document.querySelector('main%20article')%2C%20document.querySelector('main')%2C%20document.querySelector('.post-content')%2C%20document.querySelector('.entry-content')%2C%20document.querySelector('.article-content')%2C%20document.querySelector('.article-body')%2C%20document.querySelector('.post-body')%2C%20document.querySelector('.story-body')%2C%20document.querySelector('%23content')%2C%20document.querySelector('.content')%2C%20%5D%3B%20let%20articleEl%20%3D%20candidates.find(el%20%3D%3E%20el%20!%3D%3D%20null)%3B%20if%20(!articleEl)%20%7B%20const%20blocks%20%3D%20document.querySelectorAll('div%2C%20section')%3B%20let%20maxLen%20%3D%200%3B%20for%20(const%20block%20of%20blocks)%20%7B%20const%20text%20%3D%20block.textContent%20%7C%7C%20''%3B%20if%20(text.length%20%3E%20maxLen%20%26%26%20block.querySelectorAll('p').length%20%3E%3D%202)%20%7B%20maxLen%20%3D%20text.length%3B%20articleEl%20%3D%20block%3B%20%7D%20%7D%20%7D%20if%20(!articleEl)%20throw%20new%20Error('Contenu%20principal%20non%20trouv%C3%A9%20sur%20cette%20page')%3B%20const%20clone%20%3D%20articleEl.cloneNode(true)%3B%20%5B'nav'%2C'header'%2C'footer'%2C'.sidebar'%2C'.ad'%2C'.advertisement'%2C'.social-share'%2C'.comments'%2C'.comment-section'%2C'%5Brole%3D%22navigation%22%5D'%2C'%5Brole%3D%22banner%22%5D'%2C'%5Brole%3D%22contentinfo%22%5D'%2C'script'%2C'style'%2C'iframe%5Bsrc*%3D%22ad%22%5D'%2C'.newsletter-signup'%2C'.related-posts'%2C'.recommended'%5D.forEach(sel%20%3D%3E%20%7B%20clone.querySelectorAll(sel).forEach(el%20%3D%3E%20el.remove())%3B%20%7D)%3B%20return%20%7B%20html%3A%20clone.outerHTML%2C%20styles%3A%20''%2C%20title%3A%20title%2C%20siteName%3A%20siteName%2C%20extraCss%3A%20genericCss%20%7D%3B%20%7D%20function%20extractStyles()%20%7B%20let%20styles%20%3D%20''%3B%20for%20(const%20sheet%20of%20document.styleSheets)%20%7B%20try%20%7B%20for%20(const%20rule%20of%20sheet.cssRules%20%7C%7C%20%5B%5D)%20%7B%20styles%20%2B%3D%20rule.cssText%20%2B%20'%5Cn'%3B%20%7D%20%7D%20catch%20(e)%20%7B%7D%20%7D%20return%20styles%3B%20%7D%20try%20%7B%20const%20source%20%3D%20detectSource()%3B%20updateStatus(%60Extraction%20(%24%7Bsource%20%3D%3D%3D%20'x'%20%3F%20'X'%20%3A%20source%20%3D%3D%3D%20'medium'%20%3F%20'Medium'%20%3A%20'Web'%7D)...%60)%3B%20if%20(source%20%3D%3D%3D%20'generic')%20%7B%20updateStatus('Chargement%20de%20Readability...')%3B%20try%20%7B%20await%20loadReadability()%3B%20%7D%20catch%20(e)%20%7B%20console.warn('Readability%20non%20disponible%2C%20fallback%20heuristique%3A'%2C%20e.message)%3B%20%7D%20%7D%20let%20data%3B%20if%20(source%20%3D%3D%3D%20'x')%20%7B%20data%20%3D%20extractX()%3B%20%7D%20else%20if%20(source%20%3D%3D%3D%20'medium')%20%7B%20data%20%3D%20extractMedium()%3B%20%7D%20else%20%7B%20data%20%3D%20extractGeneric()%3B%20%7D%20updateStatus('Conversion%20des%20images...')%3B%20const%20container%20%3D%20document.createElement('div')%3B%20container.innerHTML%20%3D%20data.html%3B%20const%20images%20%3D%20container.querySelectorAll('img')%3B%20let%20processed%20%3D%200%3B%20for%20(const%20img%20of%20images)%20%7B%20try%20%7B%20const%20response%20%3D%20await%20fetch(img.src)%3B%20const%20blob%20%3D%20await%20response.blob()%3B%20const%20base64%20%3D%20await%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%20const%20reader%20%3D%20new%20FileReader()%3B%20reader.onloadend%20%3D%20()%20%3D%3E%20resolve(reader.result)%3B%20reader.onerror%20%3D%20reject%3B%20reader.readAsDataURL(blob)%3B%20%7D)%3B%20img.src%20%3D%20base64%3B%20processed%2B%2B%3B%20updateStatus(%60Conversion%20des%20images...%20%24%7Bprocessed%7D%2F%24%7Bimages.length%7D%60)%3B%20%7D%20catch%20(e)%20%7B%20console.warn('Image%20non%20convertie%3A'%2C%20img.src)%3B%20%7D%20%7D%20const%20elementsWithBg%20%3D%20container.querySelectorAll('*')%3B%20for%20(const%20el%20of%20elementsWithBg)%20%7B%20const%20bg%20%3D%20el.style.backgroundImage%3B%20if%20(bg%20%26%26%20bg.startsWith('url('))%20%7B%20const%20urlMatch%20%3D%20bg.match(%2Furl%5C(%5B%22'%5D%3F(%5B%5E%22')%5D%2B)%5B%22'%5D%3F%5C)%2F)%3B%20if%20(urlMatch%20%26%26%20urlMatch%5B1%5D.startsWith('http'))%20%7B%20try%20%7B%20const%20response%20%3D%20await%20fetch(urlMatch%5B1%5D)%3B%20const%20blob%20%3D%20await%20response.blob()%3B%20const%20base64%20%3D%20await%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%20const%20reader%20%3D%20new%20FileReader()%3B%20reader.onloadend%20%3D%20()%20%3D%3E%20resolve(reader.result)%3B%20reader.onerror%20%3D%20reject%3B%20reader.readAsDataURL(blob)%3B%20%7D)%3B%20el.style.backgroundImage%20%3D%20%60url(%22%24%7Bbase64%7D%22)%60%3B%20%7D%20catch%20(e)%20%7B%7D%20%7D%20%7D%20%7D%20updateStatus('G%C3%A9n%C3%A9ration%20du%20HTML...')%3B%20const%20bodyStyle%20%3D%20getComputedStyle(document.body)%3B%20const%20bgColor%20%3D%20bodyStyle.backgroundColor%20%7C%7C%20(source%20%3D%3D%3D%20'x'%20%3F%20'%23000'%20%3A%20'%23fff')%3B%20const%20textColor%20%3D%20bodyStyle.color%20%7C%7C%20(source%20%3D%3D%3D%20'x'%20%3F%20'%23fff'%20%3A%20'%23000')%3B%20const%20fontFamily%20%3D%20bodyStyle.fontFamily%3B%20const%20html%20%3D%20%60%3C!DOCTYPE%20html%3E%20%3Chtml%20lang%3D%22fr%22%3E%20%3Chead%3E%20%3Cmeta%20charset%3D%22UTF-8%22%3E%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%3E%20%3Ctitle%3E%24%7Bdata.title%7D%20-%20%24%7Bdata.siteName%7D%3C%2Ftitle%3E%20%3Cstyle%3E%20*%20%7B%20box-sizing%3A%20border-box%3B%20%7D%20body%20%7B%20margin%3A%200%3B%20padding%3A%2020px%3B%20background-color%3A%20%24%7BbgColor%7D%3B%20color%3A%20%24%7BtextColor%7D%3B%20font-family%3A%20%24%7BfontFamily%20%7C%7C%20'-apple-system%2C%20BlinkMacSystemFont%2C%20%22Segoe%20UI%22%2C%20Roboto%2C%20Helvetica%2C%20Arial%2C%20sans-serif'%7D%3B%20line-height%3A%201.6%3B%20%7D%20.article-container%20%7B%20max-width%3A%20100%25%3B%20margin%3A%200%20auto%3B%20padding%3A%2020px%2040px%3B%20%7D%20img%20%7B%20max-width%3A%20100%25%3B%20height%3A%20auto%3B%20%7D%20%24%7Bdata.styles%7D%20%24%7Bdata.extraCss%7D%20%3C%2Fstyle%3E%20%3C%2Fhead%3E%20%3Cbody%3E%20%3Cdiv%20class%3D%22article-container%22%3E%20%24%7Bcontainer.innerHTML%7D%20%3C%2Fdiv%3E%20%3C%2Fbody%3E%20%3C%2Fhtml%3E%60%3B%20updateStatus('T%C3%A9l%C3%A9chargement...')%3B%20const%20slug%20%3D%20data.siteName.toLowerCase().replace(%2F%5B%5Ea-z0-9%5D%2B%2Fg%2C%20'-')%3B%20const%20fileName%20%3D%20%60%24%7Bslug%7D-article-%24%7BDate.now()%7D.html%60%3B%20const%20isIOS%20%3D%20%2FiPad%7CiPhone%7CiPod%2F.test(navigator.userAgent)%3B%20if%20(isIOS%20%26%26%20navigator.share)%20%7B%20const%20file%20%3D%20new%20File(%5Bhtml%5D%2C%20fileName%2C%20%7B%20type%3A%20'text%2Fhtml'%20%7D)%3B%20await%20navigator.share(%7B%20files%3A%20%5Bfile%5D%2C%20title%3A%20data.title%20%7D)%3B%20%7D%20else%20%7B%20const%20blob%20%3D%20new%20Blob(%5Bhtml%5D%2C%20%7B%20type%3A%20'text%2Fhtml'%20%7D)%3B%20const%20url%20%3D%20URL.createObjectURL(blob)%3B%20const%20a%20%3D%20document.createElement('a')%3B%20a.href%20%3D%20url%3B%20a.download%20%3D%20fileName%3B%20document.body.appendChild(a)%3B%20a.click()%3B%20document.body.removeChild(a)%3B%20URL.revokeObjectURL(url)%3B%20%7D%20updateStatus('%E2%9C%93%20Termin%C3%A9%20!')%3B%20await%20sleep(2000)%3B%20statusDiv.remove()%3B%20%7D%20catch%20(error)%20%7B%20updateStatus('%E2%9D%8C%20Erreur%3A%20'%20%2B%20error.message)%3B%20await%20sleep(4000)%3B%20statusDiv.remove()%3B%20%7D%20%7D)()%3B